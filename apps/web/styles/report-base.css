/*
 * report-base.css
 *
 * Base styles for Sparlo Report Intelligence Briefing aesthetic.
 * Canvas, typography, and global styles.
 */

/* ============================================
   CANVAS - The void background
   ============================================ */
.report-page {
  min-height: 100vh;
  background: var(--void-gradient);
  color: var(--text-primary);
  font-family: var(--font-body);
  font-size: var(--text-base);
  line-height: var(--leading-relaxed);
  position: relative;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Grid texture overlay */
.report-page::before {
  content: '';
  position: fixed;
  inset: 0;
  background-image: linear-gradient(var(--grid-color) 1px, transparent 1px),
    linear-gradient(90deg, var(--grid-color) 1px, transparent 1px);
  background-size: var(--grid-size) var(--grid-size);
  pointer-events: none;
  z-index: 0;
}

/* Noise texture overlay */
.report-page::after {
  content: '';
  position: fixed;
  inset: 0;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
  opacity: var(--noise-opacity);
  pointer-events: none;
  z-index: 0;
}

/* Content sits above textures */
.report-content {
  position: relative;
  z-index: var(--z-base);
}

/* ============================================
   CONTAINER
   ============================================ */
.report-container {
  width: 100%;
  max-width: 860px;
  margin: 0 auto;
  padding: 0 var(--space-6);
}

.report-container--wide {
  max-width: 1040px;
}

.report-container--narrow {
  max-width: 720px;
}

/* ============================================
   TYPOGRAPHY - Premium Refinements
   Optical sizing, balanced text, refined spacing
   ============================================ */

/* Display headings - with text balancing */
.heading-display {
  font-family: var(--font-display);
  font-weight: var(--weight-bold);
  line-height: var(--leading-tight);
  letter-spacing: var(--tracking-tight);
  color: var(--text-primary);
  text-wrap: balance;
  text-rendering: optimizeLegibility;
}

.heading-display--xl {
  font-size: var(--text-4xl);
  letter-spacing: -0.03em;
  line-height: 1.1;
}

.heading-display--lg {
  font-size: var(--text-3xl);
  letter-spacing: -0.025em;
  line-height: 1.15;
}

.heading-display--md {
  font-size: var(--text-2xl);
  letter-spacing: -0.02em;
  line-height: 1.2;
}

.heading-display--sm {
  font-size: var(--text-xl);
  letter-spacing: -0.015em;
  line-height: 1.25;
}

/* Section headers - monospace, uppercase */
.heading-section {
  font-family: var(--font-mono);
  font-size: var(--text-xs);
  font-weight: var(--weight-semibold);
  letter-spacing: var(--tracking-widest);
  text-transform: uppercase;
  color: var(--text-muted);
}

/* Module headers */
.heading-module {
  font-family: var(--font-display);
  font-size: var(--text-xl);
  font-weight: var(--weight-bold);
  line-height: var(--leading-snug);
  letter-spacing: var(--tracking-tight);
  color: var(--text-primary);
  text-wrap: balance;
}

/* ----------------------------------------
   BODY TEXT - Refined reading experience
   ---------------------------------------- */
.text-body {
  font-family: var(--font-body);
  font-size: var(--text-base);
  line-height: var(--leading-relaxed);
  color: var(--text-secondary);
  text-rendering: optimizeLegibility;
}

.text-body--lg {
  font-size: var(--text-lg);
  line-height: 1.65;
}

.text-body--sm {
  font-size: var(--text-sm);
  line-height: var(--leading-normal);
}

/* Prose - optimal reading width */
.text-prose {
  font-family: var(--font-body);
  font-size: var(--text-base);
  line-height: var(--leading-relaxed);
  color: var(--text-secondary);
  max-width: 65ch;
}

.text-prose p {
  margin-bottom: var(--space-4);
}

.text-prose p:last-child {
  margin-bottom: 0;
}

/* Lead paragraph - larger intro text */
.text-lead {
  font-family: var(--font-body);
  font-size: var(--text-lg);
  line-height: 1.7;
  color: var(--text-secondary);
  font-weight: var(--weight-normal);
}

/* ----------------------------------------
   LABELS & DATA
   ---------------------------------------- */
.text-label {
  font-family: var(--font-mono);
  font-size: 9px;
  font-weight: var(--weight-semibold);
  letter-spacing: var(--tracking-widest);
  text-transform: uppercase;
  color: var(--text-muted);
}

.text-label--lg {
  font-size: 10px;
  letter-spacing: var(--tracking-wider);
}

/* Data values */
.text-data {
  font-family: var(--font-mono);
  font-size: var(--text-sm);
  font-weight: var(--weight-semibold);
  color: var(--text-primary);
  font-variant-numeric: tabular-nums;
}

.text-data--lg {
  font-size: var(--text-base);
}

/* Numeric data with tabular figures */
.text-numeric {
  font-family: var(--font-mono);
  font-variant-numeric: tabular-nums lining-nums;
}

/* ----------------------------------------
   SPECIAL TEXT STYLES
   ---------------------------------------- */

/* Pull quote - highlighted insight */
.text-pullquote {
  font-family: var(--font-display);
  font-size: var(--text-xl);
  font-weight: var(--weight-medium);
  line-height: var(--leading-snug);
  color: var(--text-primary);
  font-style: italic;
  padding-left: var(--space-5);
  border-left: 3px solid var(--violet-400);
}

/* Highlight text */
.text-highlight {
  background: linear-gradient(
    120deg,
    rgba(139, 92, 246, 0.15) 0%,
    rgba(139, 92, 246, 0.1) 100%
  );
  padding: 1px 4px;
  border-radius: 2px;
  color: var(--text-primary);
}

/* Muted/subtle text */
.text-muted {
  color: var(--text-muted);
}

.text-subtle {
  color: var(--text-tertiary);
}

/* Accent colored text */
.text-accent {
  color: var(--violet-400);
}

.text-success {
  color: var(--go-color);
}

.text-warning {
  color: var(--warning-color);
}

.text-danger {
  color: var(--nogo-color);
}

/* ----------------------------------------
   INLINE ELEMENTS
   ---------------------------------------- */

/* Superscript/subscript for equations */
.text-super {
  font-size: 0.75em;
  vertical-align: super;
  line-height: 0;
}

.text-sub {
  font-size: 0.75em;
  vertical-align: sub;
  line-height: 0;
}

/* Small caps for abbreviations */
.text-caps {
  font-variant-caps: all-small-caps;
  letter-spacing: 0.05em;
}

/* Inline code */
.report-page code,
.report-page .text-code {
  font-family: var(--font-mono);
  font-size: 0.9em;
  padding: 2px 6px;
  background: var(--void-elevated);
  border-radius: var(--radius-sm);
  color: var(--violet-400);
}

/* Links */
.report-page a {
  color: var(--violet-400);
  text-decoration: none;
  transition: color var(--transition-fast);
}

.report-page a:hover {
  color: var(--violet-300);
}

/* Strong/emphasis */
.report-page strong,
.report-page b {
  font-weight: var(--weight-semibold);
  color: var(--text-primary);
}

.report-page em,
.report-page i {
  font-style: italic;
}

/* ============================================
   SECTION SPACING
   ============================================ */
.report-section {
  margin-bottom: var(--section-gap);
}

.report-section:last-child {
  margin-bottom: 0;
}

/* ============================================
   SELECTION STYLES
   ============================================ */
.report-page ::selection {
  background: var(--accent-muted);
  color: var(--text-primary);
}

/* ============================================
   SCROLLBAR
   ============================================ */
.report-page ::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

.report-page ::-webkit-scrollbar-track {
  background: transparent;
}

.report-page ::-webkit-scrollbar-thumb {
  background: var(--border-strong);
  border-radius: var(--radius-sm);
}

.report-page ::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.15);
}

/* ============================================
   INFORMATION ARCHITECTURE
   Section grouping into narrative "acts"
   ============================================ */

/* Act container - groups related sections */
.report-act {
  position: relative;
  margin-bottom: calc(var(--section-gap) * 1.5);
  padding-bottom: var(--space-12);
}

/* Last act no bottom spacing */
.report-act:last-child {
  margin-bottom: 0;
  padding-bottom: 0;
}

/* Act separator line */
.report-act::after {
  content: '';
  position: absolute;
  bottom: 0;
  left: 50%;
  transform: translateX(-50%);
  width: 120px;
  height: 1px;
  background: linear-gradient(
    90deg,
    transparent 0%,
    var(--border-strong) 50%,
    transparent 100%
  );
}

.report-act:last-child::after {
  display: none;
}

/* Act header */
.report-act-header {
  display: flex;
  align-items: center;
  gap: var(--space-5);
  margin-bottom: var(--space-10);
  padding-bottom: var(--space-4);
}

.report-act-number {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 48px;
  height: 48px;
  border-radius: 50%;
  background: linear-gradient(
    135deg,
    rgba(139, 92, 246, 0.15) 0%,
    rgba(139, 92, 246, 0.05) 100%
  );
  border: 1px solid rgba(139, 92, 246, 0.2);
  font-family: var(--font-mono);
  font-size: var(--text-xl);
  font-weight: var(--weight-bold);
  color: var(--violet-400);
  flex-shrink: 0;
}

.report-act-info {
  flex: 1;
}

.report-act-label {
  font-family: var(--font-mono);
  font-size: 10px;
  font-weight: var(--weight-bold);
  letter-spacing: var(--tracking-widest);
  text-transform: uppercase;
  color: var(--violet-400);
  margin-bottom: var(--space-1);
}

.report-act-title {
  font-family: var(--font-display);
  font-size: var(--text-2xl);
  font-weight: var(--weight-bold);
  line-height: var(--leading-tight);
  letter-spacing: var(--tracking-tight);
  color: var(--text-primary);
  margin: 0;
}

.report-act-description {
  font-family: var(--font-body);
  font-size: var(--text-base);
  color: var(--text-secondary);
  line-height: var(--leading-relaxed);
  margin-top: var(--space-2);
}

/* Act content wrapper */
.report-act-content {
  display: flex;
  flex-direction: column;
  gap: var(--section-gap);
}

/* ----------------------------------------
   ACT VARIANTS
   ---------------------------------------- */

/* Discovery Act - Primary violet theme */
.report-act--discovery .report-act-number {
  background: linear-gradient(
    135deg,
    rgba(139, 92, 246, 0.2) 0%,
    rgba(139, 92, 246, 0.08) 100%
  );
  color: var(--violet-400);
}

.report-act--discovery .report-act-label {
  color: var(--violet-400);
}

/* Analysis Act - Amber theme */
.report-act--analysis .report-act-number {
  background: linear-gradient(
    135deg,
    rgba(245, 158, 11, 0.15) 0%,
    rgba(245, 158, 11, 0.05) 100%
  );
  border-color: rgba(245, 158, 11, 0.2);
  color: var(--warning-color);
}

.report-act--analysis .report-act-label {
  color: var(--warning-color);
}

/* Solution Act - Green theme */
.report-act--solution .report-act-number {
  background: linear-gradient(
    135deg,
    rgba(34, 197, 94, 0.15) 0%,
    rgba(34, 197, 94, 0.05) 100%
  );
  border-color: rgba(34, 197, 94, 0.2);
  color: var(--go-color);
}

.report-act--solution .report-act-label {
  color: var(--go-color);
}

/* Action Act - Neutral */
.report-act--action .report-act-number {
  background: rgba(255, 255, 255, 0.05);
  border-color: var(--border-default);
  color: var(--text-primary);
}

.report-act--action .report-act-label {
  color: var(--text-muted);
}

/* ----------------------------------------
   SECTION BREADCRUMB
   Shows current position in report
   ---------------------------------------- */
.section-breadcrumb {
  display: flex;
  align-items: center;
  gap: var(--space-2);
  margin-bottom: var(--space-5);
  font-family: var(--font-mono);
  font-size: var(--text-xs);
  color: var(--text-muted);
}

.breadcrumb-separator {
  color: var(--border-strong);
}

.breadcrumb-current {
  color: var(--text-secondary);
}

/* ============================================
   PRINT STYLES
   ============================================ */
@media print {
  .report-page {
    min-height: auto;
    background: white !important;
  }

  /* Remove decorative overlays */
  .report-page::before,
  .report-page::after {
    display: none !important;
  }

  /* Hide interactive elements */
  .report-page .btn,
  .report-page button:not([type="submit"]),
  .report-page [data-chat],
  .report-page [data-toc-toggle],
  .report-page nav,
  .report-page aside {
    display: none !important;
  }

  /* Avoid page breaks inside important content */
  .report-page .module,
  .report-page .callout,
  .report-page .concept-card,
  .report-page .validation-gate {
    break-inside: avoid;
    page-break-inside: avoid;
  }

  /* Force page breaks before major sections */
  .report-page .report-section {
    break-before: auto;
    page-break-before: auto;
  }

  /* Ensure links show URL */
  .report-page a[href^="http"]::after {
    content: " (" attr(href) ")";
    font-size: 0.8em;
    color: #666;
  }

  /* Print-specific typography */
  .report-page {
    font-size: 11pt;
    line-height: 1.5;
  }

  .report-page .heading-display--lg {
    font-size: 20pt;
  }

  .report-page .heading-display--md {
    font-size: 16pt;
  }

  /* Ensure full width for print */
  .report-content,
  .report-container {
    max-width: 100% !important;
    padding: 0 !important;
    margin: 0 !important;
  }
}
