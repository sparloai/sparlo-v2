# Feature: Example Reports Landing Page Section

## Overview

Add a premium "Example Reports" showcase section to the landing page. Reports are 15+ pages of text-heavy content and are THE selling point - this experience must feel flawless.

**Goal:** Let visitors experience Sparlo's intelligence reports before signing up. This is the primary conversion mechanism.

## Problem Statement

The hero section doesn't showcase actual report quality. Users can't preview the depth of intelligence reports, reducing conversion.

## Proposed Solution

Create a cohesive `ExampleReportsSection` with:
1. 6 report tabs (3 unlocked, 3 locked/premium teasers)
2. Sticky table of contents for 15-page reports (essential for navigation)
3. Premium visual design using existing Sparlo tokens
4. Text-focused React rendering (no custom charts - reuse existing report components)

## Key Decisions (Simplified from Review Feedback)

| Decision | Choice | Rationale |
|----------|--------|-----------|
| File count | 4-5 files max | Down from 15+ - consolidate aggressively |
| Animations | CSS transitions only | No Framer Motion - 95% of UX with 0KB overhead |
| URL routing | `useState` only | Add hash routing later if users request sharing |
| Chart components | None | Reports are text + existing React renderers |
| Section components | None | Content lives in data file, render generically |
| TOC | Keep (essential) | 15-page reports need navigation |
| Mobile TOC | Sheet component | Reuse existing `@kit/ui/sheet` |

## Architecture (Simplified)

```
apps/web/app/(marketing)/_components/
â””â”€â”€ example-reports/
    â”œâ”€â”€ example-reports-section.tsx   # Main container (~300 lines)
    â”œâ”€â”€ report-toc.tsx                # Desktop + mobile TOC (~100 lines)
    â””â”€â”€ example-reports-data.tsx      # Report content as React components
```

**Total: 3 files, ~500-600 lines** (down from 15+ files, 1500+ lines)

## Component Structure

```tsx
// example-reports-section.tsx
'use client'

import { useState } from 'react'
import { Sheet, SheetContent, SheetTrigger } from '@kit/ui/sheet'
import { EXAMPLE_REPORTS } from './example-reports-data'
import { ReportTOC } from './report-toc'

export function ExampleReportsSection() {
  const [activeTab, setActiveTab] = useState(0)
  const [activeSection, setActiveSection] = useState<string | null>(null)
  const report = EXAMPLE_REPORTS[activeTab]

  return (
    <section id="example-reports" className="relative py-24 bg-zinc-50">
      {/* Section Header */}
      <header className="max-w-7xl mx-auto px-6 mb-12">
        <h2 className="text-4xl lg:text-6xl font-medium tracking-tight">
          Intelligence Reports
        </h2>
        <p className="text-lg text-zinc-500 mt-4 max-w-2xl">
          Deep-dive analysis generated by our predictive models.
        </p>
      </header>

      {/* Tab Navigation - Sticky */}
      <div className="sticky top-0 z-50 bg-zinc-50/90 backdrop-blur-md border-b border-zinc-200">
        <div className="max-w-7xl mx-auto px-6">
          <div className="flex gap-6 overflow-x-auto no-scrollbar">
            {EXAMPLE_REPORTS.map((r, i) => (
              <button
                key={r.id}
                onClick={() => setActiveTab(i)}
                className={`py-4 text-sm font-medium whitespace-nowrap border-b-2 transition-colors ${
                  activeTab === i
                    ? 'text-violet-600 border-violet-600'
                    : 'text-zinc-500 border-transparent hover:text-zinc-900'
                }`}
              >
                {r.title}
                {r.locked && <span className="ml-2 text-xs">ðŸ”’</span>}
              </button>
            ))}
          </div>
        </div>
      </div>

      {/* Main Content Grid */}
      <div className="max-w-7xl mx-auto px-6 grid grid-cols-12 gap-12 mt-12">
        {/* Desktop TOC */}
        <aside className="hidden lg:block col-span-3">
          <ReportTOC
            sections={report.sections}
            activeSection={activeSection}
            onSectionClick={setActiveSection}
          />
        </aside>

        {/* Report Content */}
        <article className="col-span-12 lg:col-span-9 bg-white rounded-2xl border border-zinc-200 shadow-sm p-8 lg:p-16">
          {report.locked ? (
            <LockedOverlay report={report} />
          ) : (
            <ReportContent
              report={report}
              onSectionVisible={setActiveSection}
            />
          )}
        </article>
      </div>

      {/* Mobile TOC Button */}
      <div className="lg:hidden fixed bottom-6 right-6 z-50">
        <Sheet>
          <SheetTrigger className="bg-zinc-900 text-white px-4 py-2 rounded-full shadow-lg">
            Contents
          </SheetTrigger>
          <SheetContent>
            <ReportTOC
              sections={report.sections}
              activeSection={activeSection}
              onSectionClick={setActiveSection}
              mobile
            />
          </SheetContent>
        </Sheet>
      </div>
    </section>
  )
}

// Inline - not worth separate file
function LockedOverlay({ report }) {
  return (
    <div className="relative min-h-[400px]">
      <div className="blur-sm opacity-50 pointer-events-none">
        <h1 className="text-3xl font-semibold mb-4">{report.title}</h1>
        <p className="text-zinc-500">This is a preview of the full report...</p>
        {/* First section preview */}
      </div>
      <div className="absolute inset-0 flex items-center justify-center bg-white/80">
        <div className="text-center">
          <h3 className="text-xl font-medium mb-2">Premium Report</h3>
          <p className="text-zinc-500 mb-4">Sign up to access the full analysis</p>
          <a href="/pricing" className="bg-zinc-900 text-white px-6 py-3 rounded-lg">
            View Pricing
          </a>
        </div>
      </div>
    </div>
  )
}

// Inline - straightforward render
function ReportContent({ report, onSectionVisible }) {
  return (
    <div className="space-y-16">
      {/* Report Header */}
      <header>
        <h1 className="text-3xl lg:text-4xl font-semibold tracking-tight mb-4">
          {report.title}
        </h1>
        <p className="text-zinc-500">{report.subtitle}</p>
        <div className="flex gap-4 mt-4 text-sm text-zinc-400 font-mono">
          <span>{report.metadata.readTime}</span>
          <span>{report.metadata.dataPoints}</span>
        </div>
      </header>

      {/* Sections */}
      {report.sections.map((section) => (
        <section
          key={section.id}
          id={section.id}
          className="scroll-mt-32"
        >
          <div className="flex items-baseline gap-4 mb-6">
            <span className="font-mono text-sm text-violet-600">{section.number}</span>
            <h2 className="text-2xl font-medium">{section.title}</h2>
          </div>
          <div className="prose prose-zinc max-w-none">
            {section.content}
          </div>
        </section>
      ))}
    </div>
  )
}
```

## Report Data Structure

```typescript
// example-reports-data.tsx
import { ReactNode } from 'react'

interface ExampleReport {
  id: string
  title: string
  subtitle: string
  locked: boolean
  metadata: {
    readTime: string
    dataPoints: string
  }
  sections: {
    id: string
    number: string
    title: string
    content: ReactNode  // React elements, not raw strings
  }[]
}

export const EXAMPLE_REPORTS: ExampleReport[] = [
  {
    id: 'endosomal-escape',
    title: 'Endosomal Escape Enhancement for mRNA Therapeutics',
    subtitle: 'Beyond Ionizable Lipid Optimization',
    locked: false,
    metadata: {
      readTime: '22 min read',
      dataPoints: '4.2M data points',
    },
    sections: [
      {
        id: 'summary',
        number: '01',
        title: 'Executive Summary',
        content: (
          <>
            <p>Current endosomal escape mechanisms...</p>
            {/* Actual report content from Endosomal*.htm */}
          </>
        ),
      },
      // ... more sections
    ],
  },
  // ... 5 more reports (3 unlocked, 3 locked)
]
```

## TOC Component

```tsx
// report-toc.tsx
interface ReportTOCProps {
  sections: { id: string; number: string; title: string }[]
  activeSection: string | null
  onSectionClick: (id: string) => void
  mobile?: boolean
}

export function ReportTOC({ sections, activeSection, onSectionClick, mobile }: ReportTOCProps) {
  const handleClick = (id: string) => {
    const el = document.getElementById(id)
    el?.scrollIntoView({ behavior: 'smooth' })
    onSectionClick(id)
  }

  return (
    <nav className={mobile ? '' : 'sticky top-24'}>
      <div className="text-xs font-mono text-zinc-400 uppercase tracking-wider mb-4">
        Contents
      </div>
      <div className="flex flex-col gap-2 border-l border-zinc-200">
        {sections.map((section) => (
          <button
            key={section.id}
            onClick={() => handleClick(section.id)}
            className={`text-left pl-4 py-1 text-sm transition-colors ${
              activeSection === section.id
                ? 'text-violet-600 font-medium border-l-2 border-violet-600 -ml-[1px]'
                : 'text-zinc-500 hover:text-zinc-900'
            }`}
          >
            {section.number} {section.title}
          </button>
        ))}
      </div>
    </nav>
  )
}
```

## Active Section Tracking

Use Intersection Observer inline (no custom hook file needed):

```tsx
// Inside ReportContent component
useEffect(() => {
  const observer = new IntersectionObserver(
    (entries) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          onSectionVisible(entry.target.id)
        }
      })
    },
    { rootMargin: '-30% 0px -60% 0px' }
  )

  report.sections.forEach((section) => {
    const el = document.getElementById(section.id)
    if (el) observer.observe(el)
  })

  return () => observer.disconnect()
}, [report.sections, onSectionVisible])
```

## Acceptance Criteria

### Functional
- [ ] 6 report tabs with clear labels
- [ ] Tab switching is instant (CSS transition only)
- [ ] 3 unlocked reports show full content
- [ ] 3 locked reports show blur + pricing CTA
- [ ] TOC highlights active section on scroll
- [ ] TOC clicks smooth scroll to section
- [ ] Mobile: horizontal scrollable tabs
- [ ] Mobile: TOC accessible via floating button + Sheet

### Design Quality (95% of Aura reference)
- [ ] Sticky tab bar with backdrop blur
- [ ] Active tab has violet underline
- [ ] Report card with white bg, rounded corners, subtle shadow
- [ ] Section numbers in violet mono font
- [ ] Generous whitespace and typography hierarchy
- [ ] Smooth scroll behavior

### NOT Included (simplified away)
- [ ] ~~URL hash routing~~ (add later if users request)
- [ ] ~~Framer Motion~~ (CSS transitions sufficient)
- [ ] ~~Chart components~~ (reports are text-focused)
- [ ] ~~Lazy loading~~ (content is static, load it)
- [ ] ~~Custom hooks directory~~ (inline the one hook)

## Files to Create

| File | Purpose | Lines |
|------|---------|-------|
| `example-reports-section.tsx` | Main container with tabs, grid, inline LockedOverlay & ReportContent | ~300 |
| `report-toc.tsx` | TOC component (desktop + mobile via prop) | ~80 |
| `example-reports-data.tsx` | 6 reports with React content | ~200+ |

**Total: 3 files, ~600 lines**

## Files to Modify

| File | Change |
|------|--------|
| `apps/web/app/(marketing)/page.tsx` | Import and add `<ExampleReportsSection />` below hero |

## Visual Design

### Keep from Aura Reference
- `bg-zinc-50` background with grid pattern
- Sticky blurred tab bar
- Violet accent color for active states
- White report card with border + shadow
- Mono font for section numbers
- Clean typography hierarchy

### Skip from Aura Reference
- Charts and graphs (not in our reports)
- "Generation Complete" badge
- "Live Feed" widget
- "Was this analysis helpful?" feedback
- TRL meter visualization

## Mobile Behavior

| Element | Mobile Treatment |
|---------|------------------|
| Tabs | Horizontal scroll with snap |
| TOC | Hidden, accessible via floating "Contents" button |
| Report content | Full width, same sections |
| Locked overlay | Same treatment, touch-friendly CTA |

## Accessibility

- Tab buttons have proper focus states
- TOC links are semantic buttons with descriptive text
- Scroll behavior respects `prefers-reduced-motion`
- Locked overlay is keyboard-navigable
- Color contrast meets WCAG AA

## References

### Internal
- Landing page: `apps/web/app/(marketing)/page.tsx`
- Sheet component: `@kit/ui/sheet`
- Design tokens: `apps/web/styles/sparlo-tokens.css`
- Existing report display: `apps/web/app/home/(user)/reports/[id]/_components/`

### Example Content
- Endosomal report HTML: `Endosomal Escape Enhancement for mRNA Therapeutics*.htm`
- JSON structure: `EXAMPLE_JSON_OUTPUT`

---

*Plan revised: 2025-12-24*
*Complexity: Medium (down from Medium-High)*
*Files: 3 (down from 15+)*
*Risk: Low - straightforward implementation with existing patterns*
