(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,96869,e=>{"use strict";let t=(0,e.i(339185).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["default",()=>t])},903916,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s={callServer:function(){return n.callServer},createServerReference:function(){return i.createServerReference},findSourceMapURL:function(){return o.findSourceMapURL}};for(var a in s)Object.defineProperty(r,a,{enumerable:!0,get:s[a]});let n=e.r(384862),o=e.r(234793),i=e.r(278470)},92245,e=>{"use strict";let t=(0,e.i(339185).default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);e.s(["ChevronRight",()=>t],92245)},555301,e=>{"use strict";let t=(0,e.i(339185).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],555301)},893772,631736,e=>{"use strict";var t=e.i(96869);e.s(["Loader2",()=>t.default],893772);var r=e.i(601853);function s(e){if(!e)return 0;let t=new Date(e).getTime();return isNaN(t)?0:Math.max(0,Math.floor((Date.now()-t)/1e3))}function a(e){let t=Math.floor(e/60);return`${t}:${(e%60).toString().padStart(2,"0")}`}function n(e){let[t,a]=(0,r.useState)(()=>s(e));return(0,r.useEffect)(()=>{let t=setInterval(()=>{a(s(e))},1e3);return()=>clearInterval(t)},[e]),t}e.s(["formatElapsed",()=>a,"useElapsedTime",()=>n],631736)},138315,e=>{"use strict";let t=(0,e.i(339185).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["default",()=>t])},331385,e=>{"use strict";var t=e.i(138315);e.s(["AlertCircle",()=>t.default])},144008,e=>{"use strict";let t=(0,e.i(339185).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);e.s(["Search",()=>t],144008)},310407,e=>{"use strict";function t(e){let t=new Date(e),r=new Date,s=t.getFullYear()===r.getFullYear();return t.toLocaleDateString("en-US",{month:"short",day:"numeric",...s?{}:{year:"numeric"}}).toUpperCase()}function r(e,t){return e.length<=t?e:e.slice(0,t).trim()+"..."}e.s(["formatReportDate",()=>t,"truncateText",()=>r])},712626,428028,224085,e=>{"use strict";var t=e.i(736065),r=e.i(601853),s=e.i(582542),a=e.i(339185);let n=(0,a.default)("archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);e.s(["Archive",()=>n],428028);let o=(0,a.default)("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);var i=e.i(903916),l=(0,i.createServerReference)("7fd479674e2905dfd850f2d614003fbf82b32d4c68",i.callServer,void 0,i.findSourceMapURL,"archiveReport");function c({reportId:e,isArchived:a,onComplete:i}){let c=(0,s.useRouter)(),[d,u]=(0,r.useTransition)();return(0,t.jsx)("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),u(async()=>{try{await l({id:e,archived:!a}),i?.(),c.refresh()}catch(e){console.error("[ArchiveToggleButton] Failed to update:",e)}})},disabled:d,className:"rounded p-1.5 text-[--text-muted] opacity-0 transition-all group-hover:opacity-100 hover:bg-[--surface-overlay] hover:text-[--text-secondary]",title:a?"Restore report":"Archive report",children:(0,t.jsx)(a?o:n,{className:"h-4 w-4"})})}e.s(["ArchiveToggleButton",()=>c],712626);var d=e.i(393998);let u=d.z.enum(["clarifying","processing","complete","error","failed","confirm_rerun"]),m=d.z.enum(["Green","Yellow","Red"]);d.z.object({conversation_id:d.z.string(),message:d.z.string(),status:u,current_step:d.z.string().optional(),estimated_time_minutes:d.z.number().nullish(),report:d.z.string().nullish(),chain_state:d.z.record(d.z.unknown()).nullish()}),d.z.object({conversation_id:d.z.string(),status:u,current_step:d.z.string().optional(),completed_steps:d.z.array(d.z.string()),message:d.z.string().optional(),report:d.z.string().nullish()});let p=d.z.object({concept_id:d.z.string(),title:d.z.string(),rank:d.z.number(),total_score:d.z.number(),rationale:d.z.string()}),x=d.z.object({pattern_id:d.z.string(),title:d.z.string(),mechanism_refs:d.z.array(d.z.string()),seed_refs:d.z.array(d.z.string()),description:d.z.string()}),h=d.z.object({title:d.z.string().optional(),one_liner:d.z.string().optional()}),f=d.z.object({test_name:d.z.string().optional(),method:d.z.string().optional(),go_threshold:d.z.string().optional(),no_go_threshold:d.z.string().optional(),fallback:d.z.string().optional()}),g=d.z.object({source_type:d.z.string().optional(),title:d.z.string().optional(),reference:d.z.string().optional()});d.z.object({conversation_id:d.z.string(),viability:m,executive_summary:d.z.string(),report_markdown:d.z.string(),top_recommendation:h,test_first:f,shortlist:d.z.array(p),patterns:d.z.array(x),corpus_citations:d.z.record(d.z.string(),g)});let y={discovery:"Discovery",standard:"Analysis"};function v({mode:e}){return(0,t.jsxs)("span",{className:"font-mono text-[10px] tracking-wider text-[--text-muted] uppercase",style:{fontFamily:"Soehne Mono, JetBrains Mono, monospace"},children:["[",y[e],"]"]})}e.s(["ModeLabel",()=>v],224085)},904105,e=>{"use strict";var t=e.i(736065),r=e.i(601853),s=e.i(637611),a=e.i(582542),n=e.i(331385),o=e.i(92245),i=e.i(961757),l=e.i(893772),c=e.i(555301),d=e.i(144008),u=e.i(7205);e.i(53759);var m=e.i(541048),p=e.i(631736),x=e.i(310407),h=e.i(712626),f=e.i(224085);function g({createdAt:e}){let r=(0,p.useElapsedTime)(e);return(0,t.jsx)("span",{className:"font-mono text-xs text-violet-600 tabular-nums dark:text-violet-400",style:{fontFamily:"Soehne Mono, JetBrains Mono, monospace"},children:(0,p.formatElapsed)(r)})}function y(){let e=(0,a.useRouter)();return(0,t.jsxs)("div",{className:"rounded-lg border border-[--border-subtle] bg-[--surface-elevated] px-6 py-16 text-center","data-test":"reports-empty-state",children:[(0,t.jsx)("div",{className:"mx-auto flex h-14 w-14 items-center justify-center rounded-xl bg-[--surface-overlay]",children:(0,t.jsx)(i.FileText,{className:"h-7 w-7 text-[--text-muted]"})}),(0,t.jsx)("p",{className:"mt-4 text-sm text-[--text-muted]",style:{fontFamily:"Soehne, Inter, sans-serif"},children:"No reports yet"}),(0,t.jsx)("button",{onClick:()=>e.push("/home/reports/new"),className:"mt-4 rounded-sm bg-[--text-primary] px-4 py-2 font-mono text-xs font-medium tracking-wider text-[--surface-base] uppercase transition-colors hover:opacity-90",style:{fontFamily:"Soehne Mono, JetBrains Mono, monospace"},children:"Create Your First Report"})]})}function v({query:e}){return(0,t.jsx)("div",{className:"rounded-lg border border-[--border-subtle] bg-[--surface-elevated] px-6 py-12 text-center",children:(0,t.jsxs)("p",{className:"text-sm text-[--text-muted]",style:{fontFamily:"Soehne, Inter, sans-serif"},children:["No reports match “",e,"”"]})})}function b({reports:e}){let p=(0,a.useRouter)(),[b,j]=(0,r.useState)(""),N=(0,r.useMemo)(()=>{if(!b.trim())return e;let t=b.toLowerCase();return e.filter(e=>e.headline?.toLowerCase().includes(t)||e.title.toLowerCase().includes(t))},[b,e]);return(0,t.jsxs)("div",{className:"mx-auto w-full max-w-4xl px-6 py-12 md:py-16",style:{fontFamily:"Soehne, Inter, sans-serif"},children:[(0,t.jsxs)("div",{className:"mb-6 flex items-end justify-between",children:[(0,t.jsx)("h1",{className:"font-mono text-xs font-medium tracking-[0.2em] text-[--text-muted] uppercase",style:{fontFamily:"Soehne Mono, JetBrains Mono, monospace"},children:"REPORTS"}),(0,t.jsx)(s.default,{href:"/home/reports/new",className:"group",children:(0,t.jsxs)("button",{"data-test":"new-report-button",className:"flex items-center gap-2 font-mono text-xs font-medium text-[--text-primary] transition-colors hover:text-[--text-secondary]",style:{fontFamily:"Soehne Mono, JetBrains Mono, monospace"},children:["NEW ANALYSIS",(0,t.jsx)("span",{className:"flex h-4 w-4 items-center justify-center rounded-sm border border-[--border-default] text-[--text-muted] transition-all group-hover:border-[--text-muted] group-hover:text-[--text-primary]",children:(0,t.jsx)(c.Plus,{className:"h-3 w-3"})})]})})]}),(0,t.jsxs)("div",{className:"group relative mb-8",children:[(0,t.jsx)("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-4",children:(0,t.jsx)(d.Search,{className:"h-4 w-4 text-[--text-muted] transition-colors group-focus-within:text-[--text-secondary]"})}),(0,t.jsx)("input",{type:"text",value:b,onChange:e=>j(e.target.value),placeholder:"Search reports...",className:"w-full rounded-lg border border-[--border-subtle] bg-[--surface-elevated] py-3.5 pr-4 pl-11 text-sm text-[--text-primary] shadow-sm transition-all placeholder:text-[--text-muted] focus:border-[--border-default] focus:ring-1 focus:ring-[--border-default] focus:outline-none","data-test":"search-reports-input",style:{fontFamily:"Soehne, Inter, sans-serif"}})]}),0===e.length?(0,t.jsx)(y,{}):0===N.length?(0,t.jsx)(v,{query:b}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"overflow-hidden rounded-lg border border-[--border-subtle] bg-[--surface-elevated] shadow-sm",children:N.map((e,r)=>{let s,a=r===N.length-1,c="processing"===(s=e.status)||"clarifying"===s||"confirm_rerun"===s,d="complete"===e.status,y="failed"===e.status,v=e.headline||(0,x.truncateText)(e.title,80);return c?(0,t.jsx)("div",{"data-test":`report-card-${e.id}`,className:(0,m.cn)("group relative block cursor-default bg-violet-500/5 p-5 dark:bg-neutral-900/20",!a&&"border-b border-[--border-subtle]"),children:(0,t.jsxs)("div",{className:"flex items-start gap-4",children:[(0,t.jsxs)("div",{className:"relative mt-1.5 flex-shrink-0",children:[(0,t.jsx)("div",{className:"h-2 w-2 animate-pulse rounded-full bg-violet-500"}),(0,t.jsx)("div",{className:"absolute inset-0 h-2 w-2 animate-ping rounded-full bg-violet-500 opacity-75"})]}),(0,t.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,t.jsx)(f.ModeLabel,{mode:e.mode}),(0,t.jsx)("h3",{className:"truncate pr-8 text-sm font-medium text-[--text-secondary] opacity-90",style:{fontFamily:"Soehne, Inter, sans-serif"},children:v}),(0,t.jsxs)("div",{className:"mt-2 flex items-center gap-3",children:[(0,t.jsx)("span",{className:"font-mono text-xs tracking-wider text-violet-600 uppercase dark:text-violet-400",style:{fontFamily:"Soehne Mono, JetBrains Mono, monospace"},children:"Processing"}),(0,t.jsx)("span",{className:"h-3 w-px bg-[--border-default]"}),(0,t.jsx)(g,{createdAt:e.created_at})]})]}),(0,t.jsx)("div",{className:"absolute top-1/2 right-5 -translate-y-1/2",children:(0,t.jsx)(l.Loader2,{className:"h-4 w-4 animate-spin text-violet-500/50"})})]})},e.id):y?(0,t.jsx)("div",{"data-test":`report-card-${e.id}`,className:(0,m.cn)("group relative block cursor-default bg-red-500/5 p-5 dark:bg-red-900/10",!a&&"border-b border-[--border-subtle]"),children:(0,t.jsxs)("div",{className:"flex items-start gap-4",children:[(0,t.jsx)("div",{className:"mt-1.5 flex-shrink-0",children:(0,t.jsx)("div",{className:"h-2 w-2 rounded-full bg-red-500"})}),(0,t.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,t.jsx)(f.ModeLabel,{mode:e.mode}),(0,t.jsx)("h3",{className:"truncate pr-8 text-sm font-medium text-[--text-secondary] opacity-90",style:{fontFamily:"Soehne, Inter, sans-serif"},children:v}),(0,t.jsx)("div",{className:"mt-2 flex items-center gap-3",children:(0,t.jsx)("span",{className:"font-mono text-xs tracking-wider text-red-600 uppercase dark:text-red-400",style:{fontFamily:"Soehne Mono, JetBrains Mono, monospace"},children:"Failed"})}),(0,t.jsx)("p",{className:"mt-2 text-sm text-[--text-muted]",children:e.error_message||"Your report failed. Please submit a new analysis request and contact support for help if it happens repeatedly."})]}),(0,t.jsxs)("div",{className:"flex flex-shrink-0 items-center gap-2",children:[(0,t.jsx)(h.ArchiveToggleButton,{reportId:e.id,isArchived:!1,onComplete:()=>p.refresh()}),(0,t.jsxs)(u.Button,{variant:"outline",size:"sm",onClick:()=>p.push("/home/reports/new"),className:"gap-1.5",children:[(0,t.jsx)(n.AlertCircle,{className:"h-3.5 w-3.5"}),"New Analysis"]})]})]})},e.id):(0,t.jsxs)("div",{"data-test":`report-card-${e.id}`,className:(0,m.cn)("group relative flex items-start gap-4 p-5 transition-all",d&&"cursor-pointer hover:bg-[--surface-overlay]",!a&&"border-b border-[--border-subtle]"),onClick:()=>d&&p.push(`/home/reports/${e.id}`),children:[(0,t.jsx)("div",{className:"mt-1.5 flex-shrink-0",children:(0,t.jsx)("div",{className:(0,m.cn)("h-2 w-2 rounded-full",d?"bg-emerald-500 shadow-[0_0_8px_rgba(16,185,129,0.4)]":"bg-[--text-muted]")})}),(0,t.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,t.jsx)(f.ModeLabel,{mode:e.mode}),(0,t.jsx)("h3",{className:"truncate pr-16 text-sm font-medium text-[--text-secondary] transition-colors group-hover:text-[--text-primary]",style:{fontFamily:"Soehne, Inter, sans-serif"},children:v}),(0,t.jsxs)("div",{className:"mt-2 flex items-center gap-4",children:[(0,t.jsx)("span",{className:"font-mono text-xs text-[--text-primary]",style:{fontFamily:"Soehne Mono, JetBrains Mono, monospace"},children:(0,x.formatReportDate)(e.created_at)}),d&&e.concept_count>0&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"h-3 w-px bg-[--border-default]"}),(0,t.jsxs)("span",{className:"flex items-center gap-1.5 font-mono text-xs text-[--text-muted]",style:{fontFamily:"Soehne Mono, JetBrains Mono, monospace"},children:[(0,t.jsx)(i.FileText,{className:"h-3 w-3"}),e.concept_count," ",1===e.concept_count?"CONCEPT":"CONCEPTS"]})]})]})]}),(0,t.jsxs)("div",{className:"absolute top-1/2 right-5 flex -translate-y-1/2 items-center gap-1",children:[(0,t.jsx)(h.ArchiveToggleButton,{reportId:e.id,isArchived:!1,onComplete:()=>p.refresh()}),d&&(0,t.jsx)(o.ChevronRight,{className:"h-4 w-4 -translate-x-2 text-[--text-muted] opacity-0 transition-all duration-200 group-hover:translate-x-0 group-hover:opacity-100"})]})]},e.id)})}),(0,t.jsx)("div",{className:"mt-4 flex items-center justify-between px-1",children:(0,t.jsxs)("span",{className:"font-mono text-[10px] tracking-wider text-[--text-secondary] uppercase",style:{fontFamily:"Soehne Mono, JetBrains Mono, monospace"},children:["Showing ",N.length," of ",e.length," REPORTS"]})})]})]})}e.s(["ReportsDashboard",()=>b])}]);